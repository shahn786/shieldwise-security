<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Get a Security Quote | ShieldWise Security</title>

  <!-- Bootstrap CSS -->
  <link href="https:

        // Smooth scroll to top when clicked
        backToTopButton.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    }

    // Simple calculator functionality
    document.addEventListener('DOMContentLoaded', function() {
      const hoursRange = document.getElementById('hoursRange');
      const hoursDisplay = document.querySelector('.hours-display');
      const guardsInput = document.querySelector('.guards-input');
      const estimatedCost = document.querySelector('.estimated-cost');
      const serviceTypeRadios = document.querySelectorAll('input[name="service-type"]');

      // Base rates
      const unarmedRate = 30; // $30 per hour
      const armedRate = 45;   // $45 per hour

      function updateCost() {
        const hours = parseInt(hoursRange.value);
        const guards = parseInt(guardsInput.value);
        const isArmed = serviceTypeRadios[1].checked;

        const hourlyRate = isArmed ? armedRate : unarmedRate;
        const total = hourlyRate * hours * guards;

        estimatedCost.textContent = `Estimated Cost: $${total.toFixed(2)}`;
      }

      // Update hours display when slider changes
      hoursRange.addEventListener('input', function() {
        hoursDisplay.textContent = `${this.value} hours`;
        updateCost();
      });

      // Update cost when guards number changes
      guardsInput.addEventListener('input', function() {
        updateCost();
      });

      // Update cost when service type changes
      serviceTypeRadios.forEach(radio => {
        radio.addEventListener('change', updateCost);
      });

      // Scroll to quote form functionality
      window.scrollToQuoteForm = function() {
        const formContainer = document.querySelector('.form-container');
        formContainer.scrollIntoView({ behavior: 'smooth' });
      };
    });
  </script>

  <!-- Validation and API Call Script -->
  <script>
    const form = document.getElementById('quote-form');

    form.querySelectorAll('input, textarea, select').forEach((field) => {
      field.addEventListener('input', () => {
        if (field.classList.contains('is-invalid')) {
          field.classList.remove('is-invalid');
        }
      });
    });

    form.addEventListener('submit', async function(event) {
      event.preventDefault();

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const company = document.getElementById('company').value;
      const services = document.getElementById('services').value;
      const facility = document.getElementById('facility').value;
      const area = document.getElementById('area').value;
      const duration = document.getElementById('duration').value;
      const message = document.getElementById('message').value.trim();

      let isValid = true;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const phoneRegex = /^\d{10}$/;

      const fields = [
        { field: 'name', value: name, error: 'Name is required.' },
        { field: 'email', value: email, error: 'Please enter a valid email address.', condition: emailRegex.test(email) },
        { field: 'phone', value: phone, error: 'Contact number must be exactly 10 digits.', condition: phoneRegex.test(phone) },
        { field: 'services', value: services, error: 'Service type is required.' },
        { field: 'facility', value: facility, error: 'Facility type is required.' },
        { field: 'area', value: area, error: 'Service area is required.' },
        { field: 'duration', value: duration, error: 'Duration is required.' }
      ];

      fields.forEach(field => {
        const inputElement = document.getElementById(field.field);
        if (!field.value || (field.condition !== undefined && !field.condition)) {
          inputElement.classList.add('is-invalid');
          isValid = false;
        } else {
          inputElement.classList.remove('is-invalid');
        }
      });

      if (!isValid) return;

      const formData = { name, company, email, phone, services, facility, area, duration, message };

      try {
        const response = await fetch('/get-quote', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();
        const alertElement = document.getElementById('form-alert');

        if (result.status === 'Success') {
          alertElement.className = 'alert alert-success';
          alertElement.innerHTML = `${result.message || "Quote request submitted successfully!"}`;          
          form.reset();
        } else {
          alertElement.className = 'alert alert-danger';
          alertElement.innerHTML = `${result.message || "There was an error submitting your request. Please try again."}`; 
        }

        alertElement.classList.remove('d-none');
        alertElement.scrollIntoView({behavior: 'smooth'});
      } catch (error) {
        const alertBox = document.getElementById('form-alert');
        alertBox.className = 'alert alert-danger';
        alertBox.textContent = 'An error occurred. Please try again later.';
        alertBox.classList.remove('d-none');
      }
    });
  </script>
    <!-- Back to Top Button -->
    <a href="#top" id="backToTop" class="back-to-top" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </a>
    <!-- Back to Top JavaScript -->
    <script src="/JS/back-to-top.js"></script>
</body>
</html>