<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Get a Security Quote | ShieldWise Security</title>
  <meta name="description" content="Get a free security quote from ShieldWise Security. Custom security solutions for businesses, events, and properties across California. Fast response, competitive rates.">

  <!-- Comprehensive SEO: Canonical, Open Graph, Twitter Cards, JSON-LD Schemas, Analytics -->
  <%- include("partials/seo-head", { 
    canonicalPath: "/get-quote",
    pageTitle: "Get a Free Security Quote | ShieldWise Security California",
    pageDescription: "Get a free security quote from ShieldWise Security. Custom security solutions for businesses, events, and properties across California. Fast response, competitive rates, 24/7 availability.",
    pageImage: "https://shieldwisesecurity.com/img/California_SecurityGuards.webp",
    includeFAQ: false
  }) %>

  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

  <!-- FontAwesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/style.min.css">

  <style>
    /* Enhanced Quote Page Styling */
    body {
      background: #f5f5f7;
      color: #333;
      font-family: 'Arial', sans-serif;
    }

    .quote-section {
      position: relative;
      background: url('/img/quot.jpg') no-repeat center center;
      background-size: cover;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      color: #fff;
      padding: 40px 20px;
    }

    .quote-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1;
    }

    .text-overlay, .form-container, .calculator-container {
      position: relative;
      z-index: 2;
      max-width: 600px;
      width: 95%;
      margin: 15px auto;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
    }

    .text-overlay {
      background: rgba(0, 0, 0, 0.8);
      padding: 30px;
      color: white;
      border-left: 5px solid #d4af37;
    }

    .text-overlay h2 {
      font-size: 2.2rem;
      font-weight: 700;
      color: #d4af37;
      margin-bottom: 15px;
    }

    .text-overlay p {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #f8f8f8;
    }

    .text-overlay ul {
      list-style-type: none;
      padding: 0;
    }

    .text-overlay ul li {
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      font-size: 1.1rem;
    }

    .text-overlay ul li::before {
      content: 'âœ“';
      color: #d4af37;
      font-weight: bold;
      margin-right: 12px;
      font-size: 1.2rem;
    }

    .form-container {
      background: rgba(255, 255, 255, 0.97);
      padding: 40px;
      color: #333;
    }

    .form-container h1 {
      color: #222;
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 25px;
      text-align: center;
      position: relative;
    }

    .form-container h1::after {
      content: '';
      display: block;
      width: 80px;
      height: 3px;
      background: #d4af37;
      margin: 15px auto 0;
    }

    .form-container .form-control {
      border-radius: 8px;
      padding: 12px 15px;
      height: auto;
      border: 1px solid #ddd;
      box-shadow: none;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .form-container .form-control:focus {
      border-color: #d4af37;
      box-shadow: 0 0 0 0.2rem rgba(212, 175, 55, 0.25);
    }

    .form-container .btn-primary {
      background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
      border: none;
      border-radius: 8px;
      padding: 12px 20px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
    }

    .form-container .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 123, 255, 0.4);
      background: linear-gradient(135deg, #0056b3 0%, #003d82 100%);
    }

    .contact-info {
      margin-top: 25px;
      border-top: 1px solid #eee;
      padding-top: 20px;
      font-size: 1.1rem;
    }

    .contact-info a {
      color: #007bff;
      font-weight: bold;
      transition: color 0.3s ease;
    }

    .contact-info a:hover {
      color: #0056b3;
      text-decoration: none;
    }

    .form-row {
      margin-bottom: 1.5rem;
    }

    .invalid-feedback {
      font-size: 0.85rem;
      margin-top: 5px;
    }

    .alert {
      border-radius: 8px;
      font-weight: 500;
    }

    /* Security Calculator Styling */
    .calculator-container {
      background: #fff;
      border-radius: 15px;
      padding: 35px;
      margin: 40px auto;
      max-width: 650px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }

    .calculator-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .calculator-header h2 {
      font-size: 2.4rem;
      font-weight: 700;
      color: #222;
      margin-bottom: 5px;
    }

    .calculator-body {
      padding: 20px 0;
    }

    .calculator-body h3 {
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 25px;
      color: #333;
    }

    .service-type-group {
      margin-bottom: 30px;
    }

    .service-type-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: #444;
    }

    .service-options-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .service-option {
      display: flex;
      align-items: center;
      position: relative;
      cursor: pointer;
      font-size: 1.1rem;
      padding: 10px 15px;
      background-color: #f8f8f8;
      border-radius: 8px;
      transition: all 0.3s ease;
      border: 1px solid #e0e0e0;
    }

    .service-option:hover {
      background-color: #f0f0f0;
      border-color: #ccc;
    }

    .service-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .radio-custom {
      position: relative;
      display: inline-block;
      width: 22px;
      height: 22px;
      margin-right: 12px;
      border: 2px solid #007bff;
      border-radius: 50%;
      background-color: white;
    }

    .radio-custom::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #007bff;
      transition: all 0.2s ease;
    }

    .service-option input[type="radio"]:checked + .radio-custom::after {
      transform: translate(-50%, -50%) scale(1);
    }

    .service-option input[type="radio"]:checked ~ .service-label {
      font-weight: 600;
      color: #007bff;
    }

    .service-option input[type="radio"]:checked + .radio-custom {
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
    }

    .service-label {
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }

    .hours-slider-group {
      margin-bottom: 30px;
    }

    .hours-display {
      font-size: 1.1rem;
      margin-top: 10px;
      color: #555;
    }

    .guards-input-group {
      margin-bottom: 30px;
    }

    .guards-input {
      max-width: 100%;
      margin-bottom: 10px;
    }

    .cost-estimate {
      border-top: 1px solid #eee;
      padding-top: 25px;
      margin-top: 20px;
    }

    .estimated-cost {
      font-size: 2rem;
      font-weight: 700;
      color: #007bff;
      margin-bottom: 10px;
    }

    .cost-disclaimer {
      font-size: 0.9rem;
      color: #777;
      font-style: italic;
    }

    .request-quote-btn {
      background: #14213d;
      color: white;
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      margin-top: 20px;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .request-quote-btn:hover {
      background: #0a1429;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(20, 33, 61, 0.3);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .text-overlay, .form-container, .calculator-container {
        width: 100%;
        margin: 15px 0;
      }

      .text-overlay h2, .form-container h1 {
        font-size: 1.8rem;
      }

      .calculator-header h2 {
        font-size: 2rem;
      }

      .estimated-cost {
        font-size: 1.8rem;
      }

      .form-container, .text-overlay, .calculator-container {
        padding: 25px;
      }
    }
  </style>
</head>
<body>
  <%- include('partials/Header') %>

  <!-- Background Section with Overlay Text and Form -->
  <main class="quote-section">
    <!-- Overlay Text -->
    <div class="text-overlay">
      <h2>Trusted and Reliable</h2>
      <p>ShieldWise Security Services</p>
      <ul>
        <li>Skilled and Experienced On-Site Security Staff</li>
        <li>Affordable and Dependable Security Services</li>
        <li>24/7 Customer Support Team Available</li>
        <li>Fully Certified, Licensed, and Insured</li>
        <li>Timely and Dependable Security Officers</li>
        <li>BSIS-Certified and Professionally Trained Officers</li>
      </ul>
    </div>

    <!-- Security Calculator Section -->
    <div class="calculator-container">
      <div class="calculator-header">
        <h2>Calculate Your Security Needs</h2>
      </div>

      <div class="calculator-body">
        <h3>Security Service Calculator</h3>

        <div class="service-type-group">
          <div class="service-type-title">Type of Service</div>
          <div class="service-options-container">
            <label class="service-option">
              <input type="radio" name="service-type" checked>
              <span class="radio-custom"></span>
              <span class="service-label">Unarmed Security</span>
            </label>
            <label class="service-option">
              <input type="radio" name="service-type">
              <span class="radio-custom"></span>
              <span class="service-label">Armed Security</span>
            </label>
          </div>
        </div>

        <div class="hours-slider-group">
          <div class="service-type-title">Number of Hours</div>
          <input type="range" class="custom-range" min="1" max="24" value="8" id="hoursRange">
          <div class="hours-display">8 hours</div>
        </div>

        <div class="guards-input-group">
          <div class="service-type-title">Number of Guards</div>
          <input type="number" class="form-control guards-input" value="1" min="1" max="50">
        </div>

        <div class="cost-estimate">
          <div class="estimated-cost">Estimated Cost: $240.00</div>
          <div class="cost-disclaimer">*Final quote may vary based on specific requirements</div>

          <button class="request-quote-btn" onclick="scrollToQuoteForm()">Request Detailed Quote</button>
        </div>
      </div>
    </div>

    <!-- Form Container -->
    <div class="form-container">
      <h1>Request a Free Quote</h1>

      <!-- Display Success/Failure Messages -->
      <div id="form-alert" class="alert d-none"></div>

      <form id="quote-form" action="/get-quote" method="POST" class="quote-form">
        <!-- Name and Company -->
        <div class="form-row">
          <div class="col mb-3">
            <input type="text" name="name" id="name" placeholder="Full Name" class="form-control">
            <div class="invalid-feedback">Name is required.</div>
          </div>
          <div class="col mb-3">
            <input type="text" name="company" id="company" placeholder="Company Name (Optional)" class="form-control">
          </div>
        </div>

        <!-- Email and Phone -->
        <div class="form-row">
          <div class="col mb-3">
            <input type="text" name="email" id="email" placeholder="Email Address" class="form-control">
            <div class="invalid-feedback">Please enter a valid email address.</div>
          </div>
          <div class="col mb-3">
            <input type="tel" name="phone" id="phone" placeholder="Contact Number" class="form-control" maxlength="10">
            <div class="invalid-feedback">Contact number must be exactly 10 digits.</div>
          </div>
        </div>

        <!-- Service and Facility Type -->
        <div class="form-row">
          <div class="col mb-3">
            <select name="services" id="services" class="form-control">
              <option value="" disabled selected>Choose Service Type</option>
              <option value="security">Security Services</option>
              <option value="consulting">Consultation</option>
            </select>
            <div class="invalid-feedback">Service type is required.</div>
          </div>
          <div class="col mb-3">
            <select name="facility" id="facility" class="form-control">
              <option value="" disabled selected>Facility Type</option>
              <option value="arena">Arena/Convention</option>
              <option value="bank">Bank</option>
              <option value="business">Business/Office</option>
              <option value="government">Government</option>
              <option value="fairground">Fairground</option>
              <option value="home">Home/Residential</option>
              <option value="mall">Mall</option>
              <option value="manufacturing">Manufacturing Plant</option>
              <option value="retail">Retail</option>
              <option value="school">School</option>
              <option value="transportation">Transportation</option>
              <option value="vehicle">Vehicle Lot</option>
              <option value="warehouse">Warehouse</option>
              <option value="other">Other</option>
            </select>
            <div class="invalid-feedback">Facility type is required.</div>
          </div>
        </div>

        <!-- Area and Duration -->
        <div class="form-row">
          <div class="col mb-3">
            <select name="area" id="area" class="form-control">
              <option value="" disabled selected>Service Area</option>
              <option value="los-angeles">Los Angeles</option>
              <option value="ventura">Ventura</option>
              <option value="orange-county">Orange County</option>
              <option value="riverside">Riverside</option>
              <option value="san-bernardino">San Bernardino</option>
              <option value="san-diego">San Diego</option>
              <option value="san-francisco">San Francisco</option>
              <option value="alameda">Alameda</option>
              <option value="fresno">Fresno</option>
              <option value="san-mateo">San Mateo</option>
              <option value="sacramento">Sacramento</option>
              <option value="santa-cruz">Santa Cruz</option>
              <option value="bay-area">Bay Area</option>
              <option value="other">Other</option>
            </select>
            <div class="invalid-feedback">Service area is required.</div>
          </div>
          <div class="col mb-3">
            <select name="duration" id="duration" class="form-control">
              <option value="" disabled selected>Duration of Service</option>
              <option value="less-than-month">Less than One Month</option>
              <option value="one-to-six-months">One to Six Months</option>
              <option value="six-months-to-year">Six Months to a Year</option>
              <option value="permanent">Permanent/On Going</option>
            </select>
            <div class="invalid-feedback">Duration is required.</div>
          </div>
        </div>

        <!-- Message -->
        <div class="form-group mb-3">
          <textarea name="message" id="message" placeholder="Additional Information" class="form-control" rows="4"></textarea>
        </div>

        <button type="submit" class="btn btn-primary btn-block">Submit Request</button>
      </form>

      <p class="contact-info text-center mt-4">
        <strong>Or Call Us Now at </strong>
        <a href="tel:17147167430">&emsp;<i class="fas fa-phone-alt"></i> 1-714-716-7430</a>
      </p>
    </div>
  </main>

  <%- include('partials/Footer') %>

  <!-- Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Back to Top Script -->
  <script src="/JS/back-to-top.js"></script>

  <!-- Calculator Functionality -->
  <script>
    // Simple calculator functionality
    document.addEventListener('DOMContentLoaded', function() {
      const hoursRange = document.getElementById('hoursRange');
      const hoursDisplay = document.querySelector('.hours-display');
      const guardsInput = document.querySelector('.guards-input');
      const estimatedCost = document.querySelector('.estimated-cost');
      const serviceTypeRadios = document.querySelectorAll('input[name="service-type"]');

      // Base rates
      const unarmedRate = 30; // $30 per hour
      const armedRate = 45;   // $45 per hour

      function updateCost() {
        const hours = parseInt(hoursRange.value);
        const guards = parseInt(guardsInput.value);
        const isArmed = serviceTypeRadios[1].checked;

        const hourlyRate = isArmed ? armedRate : unarmedRate;
        const total = hourlyRate * hours * guards;

        estimatedCost.textContent = `Estimated Cost: $${total.toFixed(2)}`;
      }

      // Update hours display when slider changes
      hoursRange.addEventListener('input', function() {
        hoursDisplay.textContent = `${this.value} hours`;
        updateCost();
      });

      // Update cost when guards number changes
      guardsInput.addEventListener('input', function() {
        updateCost();
      });

      // Update cost when service type changes
      serviceTypeRadios.forEach(radio => {
        radio.addEventListener('change', updateCost);
      });

      // Scroll to quote form functionality
      window.scrollToQuoteForm = function() {
        const formContainer = document.querySelector('.form-container');
        formContainer.scrollIntoView({ behavior: 'smooth' });
      };
    });
  </script>

  <!-- Validation and API Call Script -->
  <script>
    const form = document.getElementById('quote-form');

    form.querySelectorAll('input, textarea, select').forEach((field) => {
      field.addEventListener('input', () => {
        if (field.classList.contains('is-invalid')) {
          field.classList.remove('is-invalid');
        }
      });
    });

    form.addEventListener('submit', async function(event) {
      event.preventDefault();

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const company = document.getElementById('company').value;
      const services = document.getElementById('services').value;
      const facility = document.getElementById('facility').value;
      const area = document.getElementById('area').value;
      const duration = document.getElementById('duration').value;
      const message = document.getElementById('message').value.trim();

      let isValid = true;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const phoneRegex = /^\d{10}$/;

      const fields = [
        { field: 'name', value: name, error: 'Name is required.' },
        { field: 'email', value: email, error: 'Please enter a valid email address.', condition: emailRegex.test(email) },
        { field: 'phone', value: phone, error: 'Contact number must be exactly 10 digits.', condition: phoneRegex.test(phone) },
        { field: 'services', value: services, error: 'Service type is required.' },
        { field: 'facility', value: facility, error: 'Facility type is required.' },
        { field: 'area', value: area, error: 'Service area is required.' },
        { field: 'duration', value: duration, error: 'Duration is required.' }
      ];

      fields.forEach(field => {
        const inputElement = document.getElementById(field.field);
        if (!field.value || (field.condition !== undefined && !field.condition)) {
          inputElement.classList.add('is-invalid');
          isValid = false;
        } else {
          inputElement.classList.remove('is-invalid');
        }
      });

      if (!isValid) return;

      const formData = { name, company, email, phone, services, facility, area, duration, message };

      try {
        const response = await fetch('/get-quote', {
          method: 'POST",
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();
        const alertElement = document.getElementById('form-alert');

        if (result.status === 'Success') {
          alertElement.className = 'alert alert-success';
          alertElement.innerHTML = `${result.message || "Quote request submitted successfully!"}`;          
          form.reset();
        } else {
          alertElement.className = 'alert alert-danger';
          alertElement.innerHTML = `${result.message || "There was an error submitting your request. Please try again."}`; 
        }

        alertElement.classList.remove('d-none');
        alertElement.scrollIntoView({behavior: 'smooth'});
      } catch (error) {
        const alertBox = document.getElementById('form-alert');
        alertBox.className = 'alert alert-danger';
        alertBox.textContent = 'An error occurred. Please try again later.';
        alertBox.classList.remove('d-none');
      }
    });
  </script>
</body>
</html>