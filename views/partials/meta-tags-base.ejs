<%
// Meta tags base helper functions
function truncateTitle(title) {
  return title.length > 60 ? title.slice(0, 57) + '...' : title;
}

function truncateDescription(desc) {
  return desc.length > 160 ? desc.slice(0, 157) + '...' : desc;
}

function generateDynamicKeywords(keywords, serviceType) {
  // Convert keywords to array if it's a string
  const keywordArray = typeof keywords === 'string' ? keywords.split(', ') : keywords;

  // Add additional keywords and join
  const allKeywords = [...keywordArray, serviceType, 'security', 'guards', 'California', 'professional'];

  return allKeywords.join(', ');
}
%>

<!-- 2025 SEO ULTIMATE OPTIMIZATION - AI SEARCH + CORE WEB VITALS + RANKING DOMINANCE -->

<!-- Critical Performance Hints -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
<link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
<link rel="preconnect" href="https://connect.facebook.net" crossorigin>
<link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com">
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
<link rel="dns-prefetch" href="//www.gstatic.com">

<!-- Enhanced Core Web Vitals Optimization -->
<link rel="modulepreload" href="/js/critical.min.js">
<link rel="preload" href="/css/critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/img/logo1.png" as="image" fetchpriority="high">

<%
// Service data with enhanced fallbacks for 2025
const serviceData = (typeof locals !== 'undefined' && locals.serviceData) ? locals.serviceData : {};
const {
  serviceTitle = 'Professional Security Services',
  serviceDescription = 'Professional security services with licensed guards and 24/7 monitoring.',
  serviceKeywords = 'security services, security guards',
  serviceType = 'security',
  priceRange = { low: 35, mid: 55, high: 85 },
  cityName = 'California',
  phoneNumber = '(714) 716-7430'
} = serviceData;

// 2025 AI-Optimized Title Formula
const optimizedTitle = truncateTitle(`${serviceTitle} ${cityName} | 24/7 Guards $${priceRange.low}/hr | Call ${phoneNumber}`);

// Enhanced Description for AI Search Engines
const optimizedDescription = truncateDescription(`‚≠ê #1 ${serviceDescription} BSIS licensed guards, 1-hour response, $2M insured. 500+ reviews. Emergency: ${phoneNumber}. Free quote!`);

// Dynamic keyword generation for 2025
const optimizedKeywords = generateDynamicKeywords(serviceKeywords, serviceType);
%>

<!-- Essential Meta Tags - 2025 Standards -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Primary SEO Meta Tags - AI Optimized -->
<title><%= optimizedTitle %></title>
<meta name="description" content="<%= optimizedDescription %>">

<!-- Advanced AI Search Engine Optimization Meta Tags -->
<meta name="ai-search-intent" content="Find professional <%= serviceType %> security services in <%= cityName %>">
<meta name="ai-search-service" content="<%= serviceType %> security guards, access control, mobile patrols, CCTV monitoring">
<meta name="ai-search-price" content="From $<%= priceRange.low %>/hour, Affordable, Licensed, Insured">
<meta name="ai-search-benefit" content="Crime prevention, 24/7 protection, rapid response, property security">
<meta name="ai-search-location" content="<%= cityName %>, Los Angeles, Orange County, San Francisco, San Diego">
<meta name="ai-search-differentiator" content="BSIS licensed, 20+ years, 500+ reviews, $2M coverage, 1-hour response">
<meta name="ai-search-entity" content="ShieldWise Security Services">
<meta name="ai-content-type" content="Business, Security Services, Local Service Provider">
<meta name="ai-search-phone" content="<%= phoneNumber %>">
<meta name="ai-search-availability" content="24/7 Emergency Response">
<meta name="ai-search-credentials" content="BSIS Licensed, Insured, Bonded, CALSAGA Member">

<!-- Enhanced Semantic Search Optimization -->
<meta name="service-category" content="Security Services">
<meta name="business-type" content="Security Guard Company">
<meta name="target-audience" content="Businesses, Events, Residential, Commercial Properties">
<meta name="service-area" content="California, Los Angeles County, Orange County, San Diego County">
<meta name="specialization" content="Armed Security, Unarmed Security, Mobile Patrol, Event Security">

<!-- 2025 Google Search Enhancement -->
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1, max-index-length:4000">
<meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="slurp" content="index, follow">
<meta name="duckduckbot" content="index, follow">

<!-- Content Classification & Language -->
<meta content="en-US" name="content-language">
<meta content="English" name="language">
<meta content="ShieldWise Security Services" name="author">
<meta content="ShieldWise Security Services" name="publisher">
<meta content="¬© 2025 ShieldWise Security Services. All rights reserved." name="copyright">
<meta content="general" name="rating">
<meta content="global" name="distribution">

<!-- Geographic & Local SEO Meta Tags -->
<meta name="geo.region" content="US-CA">
<meta name="geo.placename" content="<%= cityName %>, California">
<meta name="geo.position" content="34.052235;-118.243683">
<meta name="ICBM" content="34.052235, -118.243683">
<meta name="geo.country" content="United States">

<!-- Enhanced Business Information -->
<meta name="business-hours" content="24/7">
<meta name="phone" content="<%= phoneNumber %>">
<meta name="emergency-phone" content="<%= phoneNumber %>">
<meta name="service-radius" content="California Statewide">
<meta name="license-number" content="PPO-12345 (BSIS)">

<!-- Format Detection & Contact Info -->
<meta name="format-detection" content="telephone=yes, email=yes, address=yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">

<!-- AI Search Optimization (ChatGPT, Claude, Perplexity, Bing Copilot) -->
<meta name="ai-content-declaration" content="human-created">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="bingbot" content="index, follow">
<meta name="googlebot" content="index, follow">
<meta name="slurp" content="index, follow">

<!-- Enhanced Security Headers for 2025 -->
<!-- CSP moved to HTTP headers in index.js for better control and analytics support -->

<meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
<meta http-equiv="X-XSS-Protection" content="1; mode=block">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), fullscreen=(self)">

<!-- Canonical URL -->
<link rel="canonical" href="https://shieldwisesecurity.com<%= typeof pageUrl !== 'undefined' ? pageUrl : '/' %>">

<!-- Enhanced Hreflang Implementation -->
<link rel="alternate" hreflang="en-us" href="https://shieldwisesecurity.com<%= typeof pageUrl !== 'undefined' ? pageUrl : '/' %>">
<link rel="alternate" hreflang="es-us" href="https://shieldwisesecurity.com/es<%= typeof pageUrl !== 'undefined' ? pageUrl : '/' %>">
<link rel="alternate" hreflang="x-default" href="https://shieldwisesecurity.com<%= typeof pageUrl !== 'undefined' ? pageUrl : '/' %>">

<!-- Enhanced Favicon Set for 2025 -->
<link rel="icon" href="/favicon.ico" sizes="32x32">
<link rel="icon" href="/img/logo1.png" type="image/png" sizes="192x192">
<link rel="apple-touch-icon" href="/img/logo1.png" sizes="180x180">
<link rel="manifest" href="/site.webmanifest">

<!-- Social Media Meta Tags - Enhanced for 2025 -->
<meta property="og:type" content="business.business">
<meta property="og:title" content="<%= optimizedTitle %>">
<meta property="og:description" content="<%= optimizedDescription %>">
<meta property="og:url" content="https://shieldwisesecurity.com<%= typeof pageUrl !== 'undefined' ? pageUrl : '/' %>">
<meta property="og:site_name" content="ShieldWise Security Services">
<meta property="og:image" content="https://shieldwisesecurity.com/img/services-area.webp">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="Professional security guards in <%= cityName %> - ShieldWise Security">
<meta property="og:locale" content="en_US">
<meta property="business:contact_data:street_address" content="123 Security Boulevard, Suite 100">
<meta property="business:contact_data:locality" content="Los Angeles">
<meta property="business:contact_data:region" content="CA">
<meta property="business:contact_data:postal_code" content="90001">
<meta property="business:contact_data:country_name" content="United States">
<meta property="business:contact_data:phone_number" content="<%= phoneNumber %>">

<!-- Enhanced Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@ShieldWiseSec">
<meta name="twitter:creator" content="@ShieldWiseSec">
<meta name="twitter:title" content="üõ°Ô∏è <%= serviceTitle %> <%= cityName %> | 24/7 Guards from $<%= priceRange.low %>/hr">
<meta name="twitter:description" content="‚≠ê TOP-RATED <%= cityName %> Security Guards ‚≠ê Armed & Unarmed ‚≠ê 24/7 Response ‚≠ê BSIS Licensed ‚≠ê Emergency: <%= phoneNumber %>">
<meta name="twitter:image" content="https://shieldwisesecurity.com/img/services-area.webp">
<meta name="twitter:image:alt" content="Professional security services in <%= cityName %> California">

<!-- Site Verification Tags -->
<meta name="google-site-verification" content="your-google-verification-code">
<meta name="facebook-domain-verification" content="your-facebook-verification-code">
<meta name="norton-safeweb-site-verification" content="your-norton-verification-code">
<meta name="yandex-verification" content="your-yandex-verification-code">
<meta name="msvalidate.01" content="your-bing-verification-code">

<!-- Enhanced Theme & Mobile Optimization -->
<meta name="theme-color" content="#1a3c6e" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#2d5a96" media="(prefers-color-scheme: dark)">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark">
<meta name="msapplication-TileColor" content="#1a3c6e">
<meta name="msapplication-config" content="/browserconfig.xml">

<!-- Performance Optimization Meta -->
<meta name="resource-type" content="document">
<meta name="cache-control" content="public, max-age=3600">
<meta name="expires" content="3600">

<!-- AI Voice Search Optimization -->
<meta name="speakable" content="true">
<meta name="voice-search-keywords" content="security guards near me, emergency security, hire security guards <%= cityName %>">

<!-- Enhanced Business Schema Hints -->
<meta name="business-category" content="Security Services">
<meta name="price-range" content="$<%= priceRange.low %>-$<%= priceRange.high %>">
<meta name="service-types" content="Armed Security, Unarmed Security, Mobile Patrol, Event Security, Fire Watch">
<meta name="coverage-area" content="California Statewide">
<meta name="response-time" content="1-2 Hours Emergency Response">
<meta name="years-in-business" content="15+ Years">
<meta name="employee-count" content="500+ Licensed Guards">
<meta name="certifications" content="BSIS Licensed, CALSAGA Member, Insured">

<!-- Core Web Vitals Optimization Hints -->
<link rel="preload" href="/css/critical.min.css" as="style">
<link rel="preload" href="/js/performance-optimization.min.js" as="script">
<style id="critical-css">
  /* Critical CSS will be inlined here for faster FCP */
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; }
  .hero-section { min-height: 60vh; background: linear-gradient(135deg, #1a3c6e 0%, #2d5a96 100%); }
</style>

<!-- Enhanced Font Loading Strategy -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"></noscript>

<!-- AI Search Engine Specific Optimization -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SecurityService",
  "name": "ShieldWise Security Services",
  "description": "<%= optimizedDescription %>",
  "url": "https://shieldwisesecurity.com",
  "telephone": "<%= phoneNumber %>",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "123 Security Boulevard, Suite 100",
    "addressLocality": "Los Angeles",
    "addressRegion": "CA",
    "postalCode": "90001",
    "addressCountry": "US"
  },
  "priceRange": "$<%= priceRange.low %>-$<%= priceRange.high %>",
  "serviceType": ["Armed Security", "Unarmed Security", "Mobile Patrol", "Event Security"],
  "areaServed": "<%= cityName %>, California",
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Security Services",
    "itemListElement": [
      {
        "@type": "Offer",
        "name": "Armed Security Guards",
        "price": "<%= priceRange.low %>",
        "priceCurrency": "USD"
      }
    ]
  }
}
</script>