<!-- Mobile-First Indexing Optimization for 2025 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, interactive-widget=resizes-content">

<!-- iOS Safari Meta Tags -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ShieldWise Security">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="format-detection" content="telephone=yes, email=yes, address=yes">

<!-- Android Chrome Meta Tags -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#1a3c64">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#1a3c64">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0f1419">

<!-- Windows Phone Meta Tags -->
<meta name="msapplication-navbutton-color" content="#1a3c64">
<meta name="msapplication-TileColor" content="#1a3c64">
<meta name="msapplication-TileImage" content="/img/icons/ms-tile-image-144x144.png">
<meta name="msapplication-config" content="/browserconfig.xml">

<!-- Apple Touch Icons - High Resolution for Retina Displays -->
<link rel="apple-touch-icon" href="/img/icons/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="57x57" href="/img/icons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/img/icons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/img/icons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/img/icons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/img/icons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/img/icons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/img/icons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/img/icons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="167x167" href="/img/icons/apple-touch-icon-167x167.png">
<link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon-180x180.png">

<!-- Favicon Package for All Devices -->
<link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">
<link rel="icon" type="image/svg+xml" href="/img/icons/favicon.svg">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#1a3c64">
<link rel="shortcut icon" href="/favicon.ico">

<!-- Apple Startup Images for Different Screen Sizes -->
<link rel="apple-touch-startup-image" href="/img/icons/apple-launch-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/icons/apple-launch-750x1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/icons/apple-launch-1242x2208.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/icons/apple-launch-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/icons/apple-launch-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">

<!-- PWA Manifest Link -->
<link rel="manifest" href="/manifest.json">

<!-- Microsoft Application Meta -->
<meta name="application-name" content="ShieldWise Security">
<meta name="msapplication-tooltip" content="Professional Security Services">
<meta name="msapplication-starturl" content="/">

<!-- Mobile Performance Optimization -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-status-bar-style" content="black-translucent">

<!-- Touch and Interaction Optimization -->
<meta name="touch-action" content="manipulation">
<meta name="pointer" content="fine">
<meta name="hover" content="hover">

<!-- Screen Orientation Lock -->
<meta name="screen-orientation" content="portrait">

<!-- Mobile-Specific CSS -->
<style>
/* Mobile-First Critical CSS for Touch Optimization */
@media (max-width: 768px) {
  /* Ensure 44px minimum touch targets */
  .btn, button, input[type="submit"], input[type="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 20px;
  }

  /* Optimize tap targets */
  a, button, .nav-link {
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px;
  }

  /* Mobile hero optimization */
  .hero-section {
    padding: 60px 0;
    min-height: 50vh;
  }

  .hero-title {
    font-size: 2.5rem;
    line-height: 1.2;
  }

  /* Mobile navigation */
  .navbar-nav {
    padding: 20px 0;
  }

  .navbar-nav .nav-item {
    margin: 5px 0;
  }

  /* Form optimization for mobile */
  .form-control {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: 12px 15px;
  }

  /* Card spacing for mobile */
  .apartment-card, .service-card {
    margin-bottom: 20px;
  }

  /* Mobile typography */
  .section-title {
    font-size: 2rem;
    margin-bottom: 1.5rem;
  }

  .section-subtitle {
    font-size: 1.1rem;
    margin-bottom: 2rem;
  }
}

/* High DPI displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .hero-section {
    background-image: url('/img/hero-security-2x.webp');
  }
}

/* Landscape orientation optimization */
@media (orientation: landscape) and (max-height: 500px) {
  .hero-section {
    padding: 40px 0;
    min-height: 40vh;
  }

  .hero-title {
    font-size: 2rem;
  }
}

/* Dark mode support for mobile */
@media (prefers-color-scheme: dark) {
  .navbar {
    background-color: #1a1a1a;
    border-bottom: 1px solid #333;
  }

  .btn-primary {
    background-color: #3a5a97;
  }
}
</style>

<!-- Mobile JavaScript for Enhanced UX -->
<script>
// Mobile-specific optimizations
document.addEventListener('DOMContentLoaded', function() {
  // Prevent zoom on input focus for iOS
  const inputs = document.querySelectorAll('input, select, textarea');
  inputs.forEach(input => {
    input.addEventListener('touchstart', function() {
      if (input.style.fontSize !== '16px') {
        input.style.fontSize = '16px';
      }
    });
  });

  // Optimize scroll performance
  let ticking = false;
  function updateScrollPosition() {
    // Passive scroll listener optimization
    ticking = false;
  }

  document.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(updateScrollPosition);
      ticking = true;
    }
  }, { passive: true });

  // Touch feedback for buttons
  const buttons = document.querySelectorAll('button, .btn');
  buttons.forEach(button => {
    button.addEventListener('touchstart', function() {
      this.style.transform = 'scale(0.98)';
    }, { passive: true });

    button.addEventListener('touchend', function() {
      this.style.transform = 'scale(1)';
    }, { passive: true });
  });
});

// Service Worker for offline functionality
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js', {
      scope: '/'
    }).then(registration => {
      console.log('ServiceWorker registered successfully');
    }).catch(error => {
      console.log('ServiceWorker registration failed');
    });
  });
}

// Add to Home Screen prompt
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;

  // Show install button
  const installButton = document.querySelector('#install-app');
  if (installButton) {
    installButton.style.display = 'block';
    installButton.addEventListener('click', () => {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted the install prompt');
        }
        deferredPrompt = null;
      });
    });
  }
});
</script>
