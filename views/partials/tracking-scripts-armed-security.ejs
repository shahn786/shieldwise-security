
<!-- Armed Security Specific Tracking Scripts -->

<!-- Enhanced Google Analytics Events for Armed Security -->
<script>
// Armed Security Specific Event Tracking
window.dataLayer = window.dataLayer || [];

// Track armed security page view
gtag('event', 'page_view', {
  'page_title': 'Armed Security Services California',
  'page_location': window.location.href,
  'content_group1': 'Armed Security Services',
  'content_group2': 'High-Risk Protection',
  'custom_parameter_1': 'armed_security',
  'custom_parameter_2': 'california_statewide',
  'service_type': 'armed_security',
  'price_range': '75-125',
  'response_time': 'under_15_minutes'
});

// Track armed security interest
function trackArmedSecurityInterest(action, element) {
  gtag('event', 'armed_security_interest', {
    'event_category': 'Armed Security',
    'event_label': action,
    'element_id': element,
    'service_type': 'armed_protection',
    'value': 1
  });
}

// Track pricing interactions
function trackArmedSecurityPricing(priceType) {
  gtag('event', 'pricing_view', {
    'event_category': 'Armed Security Pricing',
    'event_label': priceType,
    'service_type': 'armed_security',
    'currency': 'USD',
    'value': priceType === 'executive_protection' ? 125 : 75
  });
}

// Track emergency contact clicks
function trackEmergencyContact() {
  gtag('event', 'emergency_contact', {
    'event_category': 'Armed Security Emergency',
    'event_label': 'Emergency Hotline Click',
    'service_type': 'armed_emergency_response',
    'urgency': 'high'
  });
}

// Track quote requests for armed security
function trackArmedSecurityQuote(source) {
  gtag('event', 'lead_generation', {
    'event_category': 'Armed Security Lead',
    'event_label': 'Quote Request',
    'source': source,
    'service_type': 'armed_security',
    'value': 500 // Estimated lead value
  });
}

// Track feature interactions
document.addEventListener('DOMContentLoaded', function() {
  // Track armed security feature clicks
  const featureCards = document.querySelectorAll('.armed-feature-card');
  featureCards.forEach(function(card, index) {
    card.addEventListener('click', function() {
      const featureName = card.querySelector('.armed-feature-title').textContent;
      trackArmedSecurityInterest('feature_click', featureName);
    });
  });

  // Track benefit interactions
  const benefitItems = document.querySelectorAll('.armed-benefit-item');
  benefitItems.forEach(function(item, index) {
    item.addEventListener('mouseenter', function() {
      const benefitName = item.querySelector('h4').textContent;
      trackArmedSecurityInterest('benefit_hover', benefitName);
    });
  });

  // Track CTA button clicks
  const ctaButtons = document.querySelectorAll('.armed-cta-button, .btn-custom');
  ctaButtons.forEach(function(button) {
    button.addEventListener('click', function() {
      trackArmedSecurityQuote('cta_button');
    });
  });

  // Track emergency badge clicks
  const emergencyBadge = document.querySelector('.armed-emergency-badge');
  if (emergencyBadge) {
    emergencyBadge.addEventListener('click', trackEmergencyContact);
  }

  // Track phone number clicks
  const phoneLinks = document.querySelectorAll('a[href*="tel:"]');
  phoneLinks.forEach(function(link) {
    link.addEventListener('click', function() {
      gtag('event', 'phone_call', {
        'event_category': 'Armed Security Contact',
        'event_label': 'Phone Call Click',
        'phone_number': link.href.replace('tel:', ''),
        'service_type': 'armed_security'
      });
    });
  });
});

// Scroll depth tracking for armed security content
let scrollDepthTracked = false;
window.addEventListener('scroll', function() {
  const scrollPercent = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
  
  if (scrollPercent > 75 && !scrollDepthTracked) {
    gtag('event', 'scroll_depth', {
      'event_category': 'Armed Security Engagement',
      'event_label': '75% Page Scroll',
      'service_type': 'armed_security',
      'engagement_level': 'high'
    });
    scrollDepthTracked = true;
  }
});

// Form abandonment tracking
const formFields = document.querySelectorAll('input, textarea, select');
let formStarted = false;

formFields.forEach(function(field) {
  field.addEventListener('focus', function() {
    if (!formStarted) {
      gtag('event', 'form_start', {
        'event_category': 'Armed Security Form',
        'event_label': 'Form Interaction Started',
        'service_type': 'armed_security'
      });
      formStarted = true;
    }
  });
});

// Page exit intent tracking
let exitIntentTriggered = false;
document.addEventListener('mouseleave', function(e) {
  if (e.clientY <= 0 && !exitIntentTriggered) {
    gtag('event', 'exit_intent', {
      'event_category': 'Armed Security Behavior',
      'event_label': 'Exit Intent Detected',
      'service_type': 'armed_security'
    });
    exitIntentTriggered = true;
  }
});
</script>

<!-- Facebook Pixel - Armed Security Specific Events -->
<script>
// Track armed security page view
if (typeof fbq !== 'undefined') {
  fbq('track', 'ViewContent', {
    content_name: 'Armed Security Services',
    content_category: 'Security Services',
    content_type: 'service_page',
    value: 75.00,
    currency: 'USD'
  });

  // Track armed security interest
  function trackFBArmedSecurityInterest() {
    fbq('track', 'Lead', {
      content_name: 'Armed Security Interest',
      content_category: 'Security Services',
      value: 500.00,
      currency: 'USD'
    });
  }

  // Track quote requests
  function trackFBArmedSecurityQuote() {
    fbq('track', 'InitiateCheckout', {
      content_name: 'Armed Security Quote',
      content_category: 'Security Services',
      value: 750.00,
      currency: 'USD'
    });
  }
}
</script>

<!-- LinkedIn Insight Tag - Armed Security Tracking -->
<script>
if (typeof _linkedin_data_partner_ids !== 'undefined') {
  window.lintrk = window.lintrk || function(a,b){window.lintrk.q.push([a,b])};
  
  // Track armed security page view
  lintrk('track', { conversion_id: 'ARMED_SECURITY_VIEW' });
  
  // Function to track armed security conversions
  function trackLinkedInArmedSecurity(action) {
    lintrk('track', { 
      conversion_id: 'ARMED_SECURITY_' + action.toUpperCase(),
      conversion_value: action === 'QUOTE' ? 500 : 100
    });
  }
}
</script>

<!-- Microsoft Clarity - Armed Security Heatmaps -->
<script>
// Enhanced Clarity tracking for armed security
if (typeof clarity !== 'undefined') {
  clarity('set', 'service_type', 'armed_security');
  clarity('set', 'page_category', 'high_value_service');
  clarity('set', 'user_intent', 'security_protection');
}
</script>

<!-- Custom Armed Security Analytics -->
<script>
// Track time spent on armed security features
const featureViewTimes = {};
const featureObserver = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) {
    if (entry.isIntersecting) {
      const featureName = entry.target.querySelector('.armed-feature-title').textContent;
      featureViewTimes[featureName] = Date.now();
    } else {
      const featureName = entry.target.querySelector('.armed-feature-title').textContent;
      if (featureViewTimes[featureName]) {
        const viewTime = Date.now() - featureViewTimes[featureName];
        if (viewTime > 3000) { // 3+ seconds
          gtag('event', 'feature_engagement', {
            'event_category': 'Armed Security Feature',
            'event_label': featureName,
            'view_time': Math.round(viewTime / 1000),
            'engagement_type': 'extended_view'
          });
        }
      }
    }
  });
}, { threshold: 0.5 });

// Observe all armed security feature cards
document.addEventListener('DOMContentLoaded', function() {
  const featureCards = document.querySelectorAll('.armed-feature-card');
  featureCards.forEach(function(card) {
    featureObserver.observe(card);
  });
});
</script>

<!-- Heat Map and User Behavior Tracking -->
<script>
// Track user interactions with armed security elements
document.addEventListener('DOMContentLoaded', function() {
  // Track stat card interactions
  const statCards = document.querySelectorAll('.armed-stat-card');
  statCards.forEach(function(card, index) {
    card.addEventListener('mouseenter', function() {
      gtag('event', 'stat_interaction', {
        'event_category': 'Armed Security Stats',
        'event_label': 'Stat Card Hover',
        'stat_position': index + 1
      });
    });
  });

  // Track process step interactions
  const processSteps = document.querySelectorAll('.armed-process-step');
  processSteps.forEach(function(step, index) {
    step.addEventListener('click', function() {
      gtag('event', 'process_interaction', {
        'event_category': 'Armed Security Process',
        'event_label': 'Process Step Click',
        'step_number': index + 1
      });
    });
  });
});
</script>
