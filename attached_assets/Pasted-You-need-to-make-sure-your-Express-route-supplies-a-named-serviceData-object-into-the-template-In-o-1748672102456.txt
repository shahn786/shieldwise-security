You need to make sure your Express route supplies a named serviceData object into the template. In other words, when you call res.render(...), you must pass an object whose key is exactly serviceData. That way, in your EJS files, locals.serviceData (and therefore safeServiceData) will be defined.

Below is a minimal example of what your route handler (e.g. in app.js or server.js) should look like. Adjust the values inside exampleServiceData to match whatever real data you want to use:

js
Copy
Edit
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// app.js (or server.js)
// ‚îÄ‚îÄ
// Make sure you have already done something like:
//    const express = require('express');
//    const app = express();
//    app.set('view engine', 'ejs');
//    app.set('views', __dirname + '/views');
// etc.
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

// Example ‚ÄúserviceData‚Äù object. Replace these fields with real values if you have them.
const exampleServiceData = {
  serviceTitle:       'Apartment Security Services',
  serviceDescription: 'Comprehensive residential security with on‚Äêsite guards, CCTV, and mobile patrols.',
  serviceKeywords:    'apartment security, residential security, on-site guards',
  serviceImage:       'apartment-security.webp',
  serviceUrl:         'apartment-security',
  serviceType:        'apartment',
  serviceBenefit:     'peace of mind for your tenants',
  propertyType:       'apartment complex',
  priceRange:         { low: 45, mid: 65, high: 95 },
  serviceAltName:     'Residential Apartment Security',
  serviceOutput:      'Safe & Secure Apartment Community',
  audienceType:       'Property Managers and Homeowners Associations'
};

// This is the route that renders ‚Äúapartment-security.ejs‚Äù
// Notice: we pass an object whose property is exactly ‚ÄúserviceData‚Äù
app.get('/services/apartment-security', (req, res) => {
  res.render('services/apartment-security', {
    serviceData: exampleServiceData
  });
});

// If you also have a generic ‚Äú/services‚Äù page, you can set it up similarly:
// app.get('/services', (req, res) => {
//   res.render('services', { /* optionally pass some data here */ });
// });

// Finally, start your server:
app.listen(3000, () => {
  console.log('üì° Server running at http://localhost:3000');
});
Why this matters
In your EJS files, you are doing:

ejs
Copy
Edit
<%- include('../Partials/meta-helpers', { serviceData: serviceData }) %>
That line expects that serviceData is already defined as a local variable, because you wrote { serviceData: serviceData }.

By writing res.render('services/apartment-security', { serviceData: exampleServiceData }), you tell Express:

‚ÄúIn that template, there will be a local variable named serviceData, whose value is exampleServiceData.‚Äù

Now, inside meta-helpers.ejs, you do:

ejs
Copy
Edit
const {
  serviceTitle,
  serviceDescription,
  /* ‚Ä¶ etc ‚Ä¶ */
} = typeof locals.serviceData !== 'undefined' ? serviceData : {};
Because Express passed serviceData into EJS, locals.serviceData is defined, so your helpers can unpack it and build safeServiceData.

Once safeServiceData exists, every subsequent include (meta-tags-service.ejs, performance-optimization.ejs, mobile-app-meta.ejs, etc.) can safely refer to <%= safeServiceData.serviceType %> (or any other field) without triggering a ‚Äúnot defined‚Äù error.

Checklist
Express route must look like this (literally):

js
Copy
Edit
app.get('/services/apartment-security', (req, res) => {
  res.render('services/apartment-security', {
    serviceData: exampleServiceData
  });
});
‚Äì Do not do res.render('services/apartment-security', exampleServiceData) (that would treat each field as its own local, rather than bundling them under serviceData).

In /views/services/apartment-security.ejs:

The very first line must be:

ejs
Copy
Edit
<%- include('../Partials/meta-helpers', { serviceData: serviceData }) %>
(That ensures meta-helpers.ejs can read locals.serviceData.)

In /views/Partials/meta-helpers.ejs, you build safeServiceData from locals.serviceData.

In /views/services/apartment-security.ejs, after you include meta-helpers, you can do:

ejs
Copy
Edit
<head>
  <%- include('../Partials/meta-tags-service') %>
  <%- include('../Partials/performance-optimization') %>
  <%- include('../Partials/mobile-app-meta') %>
  <!-- etc‚Ä¶ -->
</head>
Because meta-helpers already ran, safeServiceData is in that parent scope.

Once you have exactly that setup, restart your server and visit:

bash
Copy
Edit
http://localhost:3000/services/apartment-security
You should no longer see any ‚ÄúsafeServiceData is not defined‚Äù or ‚ÄútruncateTitle is not defined‚Äù errors‚Äîeveryone is in scope exactly once you pass { serviceData: ‚Ä¶ } to res.render(...).