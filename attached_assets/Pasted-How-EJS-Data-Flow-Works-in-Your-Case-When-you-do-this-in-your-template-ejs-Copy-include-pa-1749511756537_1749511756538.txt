How EJS Data Flow Works in Your Case
When you do this in your template:

ejs
Copy
<%- include('../partials/schema-service', serviceData) %>
all the key/value pairs in serviceData become variables inside schema-service.ejs.
If a key is missing, any attempt to render <%= audienceType %> will fail.

How to Fix
1. Add audienceType (and any other missing fields) to your serviceData in your route/controller.

For example, in your Express route:

js
Copy
router.get('/hotel-security', (req, res) => {
  const serviceData = {
    serviceTitle: 'Hotel Security Services',
    serviceDescription: '24/7 professional hotel security in California...',
    serviceKeywords: 'hotel security, hospitality protection, ...',
    serviceImage: 'hero-hotel-security.webp',
    serviceUrl: 'hotel-security',
    serviceType: 'hotel_security',
    serviceBenefit: 'peace of mind for hotels and guests',
    propertyType: 'hotels and hospitality properties',
    priceRange: { low: 49, mid: 79, high: 129 },
    serviceAltName: 'Hospitality Security',
    serviceOutput: 'Enhanced guest safety and asset protection',
    audienceType: 'Hotel Owners, Managers, Hospitality Businesses', // <-- Add this!
    // ... any other needed keys
  };
  res.render('services/hotel-security', { serviceData });
});
2. Check All Used Variables in schema-service.ejs

Make sure every <%= someVariable %> in schema-service.ejs has a corresponding property in your serviceData.
Missing just one will break rendering.

Bonus: Quick Way to Avoid These Errors
Set sensible defaults inside schema-service.ejs:

ejs
Copy
<%= typeof audienceType !== "undefined" ? audienceType : "General" %>
But the best practice is to ensure all required fields are set in your controller.

Summary Table for Troubleshooting
Variable in Partial	Is it in serviceData?
serviceTitle	✅ (if set)
serviceDescription	✅ (if set)
audienceType	❌ MISSING (your error)
...	...

Next Steps for You
Update your route/controller to include audienceType (and any others your partial expects).

Double-check all your partials for required variables.

Restart your server and retest.

